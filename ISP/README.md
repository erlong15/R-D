
1. VDS "deb7" не устанавливается ОС Debian 7. Выяснить почему, описать решение проблемы, установить ОС
2. VDS "qtestvm" и "qtestvm.speed"
2.1. Сбросить пароли и описать процесс
2.2. Прогнать внутри тест командой fio /root/fio.cfg
2.2.1. Объяснить, почему результаты на VDS отличаются
2.2.2. Что сделать, чтобы исправить ситуацию?
2.3. Сколько места занимает диск VDS на паренте? Почему?
3. Сменить IP на VDS "qtestvm" на 10.6.2.5, чтобы VDS была доступна извне по SSH. Описать процесс
4. Добавить в VMmanager хранилище типа LVM. Создать в нём диск и подключить к VDS "qtestvm.speed"
5. Создать новую VDS на CentOS 7 и установить туда через VMmanager рецепт Redmine. Объяснить результат
6. Настроить бекап базы данных VMmanager. Описать процесс
7. Как через API панели получить историю операций с VDS "deb7"?

Выполнение:

0. в присланном .ovpn файле не хватало шлюза. Адрес шлюза выловил из своего syslog
1. дебиан 7 снята с поддержка, в стандартных зеркалах такой репы нет. Настройки кластера - Шаблоны ОС - выбрать нужный шаблон (в моём случае Debian-7-amd64), нажать кнопку "параметры". Изменить значение переменной $MIRROR на archive.debian.org. Перезапускаем установку ОС - этап выбора зеркала проходит  и радостно начинает тянуть пакеты. Доступ root / $NewRoot123
2. Доступы qtestvm / root / &YGV7ygv , qtestvm.speed / root / 1K9p4Q8d
2.1. Сбросить пароль можно двумя способами:
а) (медленный, old-style) на машине qtestvm авторизация была пройдена до меня, для чистоты эксперименты перезагрузил - _reboot now_. При загрузке нажать _e_, в строке, начинающейся с linux*, поменять _ro_ на _rw_ (чтобы пароль успешно поменялся, файловую систему надо монтировать на запись) и добавить _init=/bin/bash_ (сразу попасть в консоль). Нажать _ctrl+x_ (загрузиться в систему), после чего поменять пароль - _passwd root_, перезагрузиться - _/sbin/reboot -f_
б) (быстрый) в панели VMmanager нажать кнопку "пароль" и задать новый
2.2.1. на медленной vm практически в два раза ниже IOPS, а также выше latency (ожидание)
2.2.2. при одинаковом хранилище для дисков, одинаковом весе использования io что-то режет IOPS. Скорее всего это из-за созданного снэпшота на VM qtestvm.
upd. снэпшот убрал, теперь 14,7MiB/s read, 12.2MiB/s write на медленной, 26,6MiB/s read, 18,7MiB/s write на быстрой. чем-то еще различается.
2.3. диск qtestvm до удаления снэпшота занимал 8.6 Гб, это связано с особенностями хранения в формате qcow2. При хранении в формате raw диск занимал бы ровно столько места, сколько нарезано для VM.

    root@test ~# qemu-img info /vm/qtestvm
    image: /vm/qtestvm
    file format: qcow2
    virtual size: 9.8G (10485760000 bytes)
    disk size: 8.6G
    cluster_size: 65536
    Snapshot list:
    ID        TAG                 VM SIZE                DATE       VM CLOCK
    1         test1                  585M 2019-12-18 17:26:07   00:13:06.779
    Format specific information:
        compat: 0.10
        refcount bits: 16

    root@test ~# qemu-img info /vm/qtestvm.speed 
    image: /vm/qtestvm.speed
    file format: qcow2
    virtual size: 9.8G (10485760000 bytes)
    disk size: 3.6G
    cluster_size: 65536
    Format specific information:
        compat: 0.10
        refcount bits: 16


4. выполнено.

5. redmine.test / root / 4G1f9X9u 
пока падает из-за нехватки памяти

6. вставить картинку 03_backup.png. Резервное копирование - настройки - Создать план резервного копирования. Предложит создать хранилище резервных копий при его отстутсвии. Затем как на картинке.


